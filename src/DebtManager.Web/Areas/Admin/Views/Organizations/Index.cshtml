@{
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}

@* Build a view model for the reusable table *@
@{
    var model = new DebtManager.Web.Models.DataTable.DataTableViewModel
    {
        TableKey = "admin.organizations",
        Title = "Organizations",
        DataUrl = Url.Action("Get", "OrganizationsApi", new { area = "Admin" }),
        Columns = new System.Collections.Generic.List<DebtManager.Web.Models.DataTable.DataTableColumn>
        {
            new("Id","ID"),
            new("Name","Name"),
            new("Abn","ABN"),
            new("Subdomain","Subdomain"),
            new("Status","Status"),
            new("Debtors","Debtors")
        },
        Rows = new System.Collections.Generic.List<DebtManager.Web.Models.DataTable.DataTableRow>(),
        Page = (int)(ViewBag.Page ?? 1),
        PageSize = (int)(ViewBag.PageSize ?? 10),
        TotalCount = 0,
        ShowSearch = true,
        ShowStatusFilter = true,
        StatusOptions = new System.Collections.Generic.List<(string,string)> { ("active","Active"), ("pending","Pending"), ("suspended","Suspended") },
        ShowDensityToggle = true
    };
}

@await Html.PartialAsync("~/Views/Shared/Components/_DataTable.cshtml", model)
