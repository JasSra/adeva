@{
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
    ViewBag.Title = "Database Diagnostics";
}

<div class="mb-6">
    <h2 class="text-2xl font-bold text-gray-900 dark:text-white">Database Diagnostics</h2>
    <p class="mt-1 text-sm text-gray-600 dark:text-gray-400">
        This page tests the database connection and schema to identify issues with the Scenarios page.
    </p>
</div>

<div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
    <h3 class="text-lg font-semibold mb-4">Diagnostic Results</h3>
    <div class="space-y-2">
        @foreach (var diagnostic in ViewBag.Diagnostics as List<string>)
        {
            <div class="p-3 @(diagnostic.Contains("❌") ? "bg-red-50 border-l-4 border-red-500 text-red-900" : diagnostic.Contains("⚠️") ? "bg-yellow-50 border-l-4 border-yellow-500 text-yellow-900" : "bg-green-50 border-l-4 border-green-500 text-green-900") rounded">
                <code class="font-mono text-sm">@diagnostic</code>
            </div>
        }
    </div>

    <div class="mt-6 p-4 bg-blue-50 border border-blue-200 rounded">
        <h4 class="font-semibold text-blue-900 mb-2">If you see "Pending Migrations" above:</h4>
        <p class="text-sm text-blue-800 mb-2">The database tables don't exist yet. Run this command:</p>
        <code class="block bg-gray-900 text-green-400 px-3 py-2 rounded font-mono text-sm">cd src/DebtManager.Web && dotnet ef database update</code>
    </div>

    <div class="mt-4">
        <a href="/Admin/Scenarios" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 inline-block">Back to Scenarios</a>
    </div>
</div>

