@*
    Inline field validation error display
    
    Usage:
    @await Html.PartialAsync("~/Views/Shared/Partials/_FieldError.cshtml", "FieldName")
    
    Requires:
    - TempData["ValidationErrors"] as JSON string (Dictionary<string, string[]>)
*@
@using System.Text.Json

@model string

@{
    var fieldName = Model ?? string.Empty;
    var validationErrors = new Dictionary<string, string[]>();
    if (TempData.Peek("ValidationErrors") is string json && !string.IsNullOrWhiteSpace(json))
    {
        validationErrors = JsonSerializer.Deserialize<Dictionary<string, string[]>>(json) ?? new Dictionary<string, string[]>();
    }
    var hasError = validationErrors.ContainsKey(fieldName);
    var errors = hasError ? validationErrors[fieldName] : Array.Empty<string>();
}

@if (hasError && errors.Any())
{
    <p class="mt-1 text-sm text-red-600 dark:text-red-400" role="alert">
        @string.Join(", ", errors)
    </p>
}
